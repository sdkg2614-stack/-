<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Farm Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root {
    --green: #2ecc71;
    --blue: #1abc9c;
    --dark: #2c3e50;
    --gray: #7f8c8d;
}

body {
    font-family: 'Prompt', sans-serif;
    background: linear-gradient(135deg, #e8f5e9, #e0f7fa);
    margin: 0;
    padding: 20px;
    text-align: center;
}

header {
    margin-bottom: 30px;
}
header h1 {
    color: var(--dark);
}
header p {
    color: var(--gray);
    font-size: 0.9rem;
}

.container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    max-width: 900px;
    margin: auto;
}

.card {
    background: #fff;
    border-radius: 18px;
    padding: 25px 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.icon {
    font-size: 2.5rem;
}

.value {
    font-size: 2.8rem;
    font-weight: 600;
    color: var(--blue);
}

.unit {
    color: var(--gray);
}

/* Buttons */
.controls {
    margin-top: 30px;
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
}

button {
    font-family: 'Prompt', sans-serif;
    font-size: 1rem;
    padding: 12px 25px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 5px 12px rgba(0,0,0,0.15);
}

.btn-refresh {
    background: var(--blue);
    color: #fff;
}

.btn-reset {
    background: #e74c3c;
    color: #fff;
}

.status {
    margin-top: 25px;
    font-size: 0.9rem;
    color: var(--gray);
}

footer {
    margin-top: 40px;
    font-size: 0.8rem;
    color: #aaa;
}
</style>
</head>

<body>

<header>
    <h1>üåø Smart Farm Dashboard</h1>
    <p>‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ (GitHub Pages)</p>
</header>

<div class="container">

    <div class="card">
        <div class="icon">üå°Ô∏è</div>
        <h3>‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</h3>
        <div class="value" id="temp">--</div>
        <div class="unit">¬∞C</div>
    </div>

    <div class="card">
        <div class="icon">üíß</div>
        <h3>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</h3>
        <div class="value" id="humi">--</div>
        <div class="unit">%</div>
    </div>

    <div class="card">
        <div class="icon">üå±</div>
        <h3>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô</h3>
        <div class="value" id="soil">--</div>
        <div class="unit">%</div>
    </div>

</div>

<div class="controls">
    <button class="btn-refresh" onclick="fetchData()">üì° ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡πà‡∏≤</button>
    <button class="btn-reset" onclick="resetDevice()">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</button>
</div>

<div class="status">
    ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="time">--</span>
</div>

<footer>
    Smart Farm IoT ¬© 2026
</footer>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/XXXX/exec";

async function fetchData() {
    try {
        const res = await fetch(SCRIPT_URL + "?action=read");
        const data = await res.json();

        document.getElementById("temp").innerText = data.temp;
        document.getElementById("humi").innerText = data.humi;
        document.getElementById("soil").innerText = data.soil;
        document.getElementById("time").innerText =
            new Date().toLocaleString("th-TH");
    } catch (e) {
        document.getElementById("time").innerText = "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ";
    }
}

async function resetDevice() {
    if (!confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return;

    try {
        await fetch(SCRIPT_URL + "?action=reset");
        document.getElementById("time").innerText = "üîÑ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡πÅ‡∏•‡πâ‡∏ß";
    } catch (e) {
        alert("‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    }
}

fetchData();
setInterval(fetchData, 5000);
</script>

</body>
</html>
