<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP8266 IoT Dashboard</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; text-align: center; padding: 20px; }
        .container { display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-top: 30px; }
        .card { background: white; border-radius: 15px; padding: 20px; width: 200px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .value { font-size: 2.5rem; font-weight: bold; color: #2c3e50; }
        .unit { font-size: 1rem; color: #7f8c8d; }
        h1 { color: #2c3e50; }
        .status { margin-top: 20px; font-size: 0.9rem; color: #95a5a6; }
    </style>
</head>
<body>

    <h1>üåø Smart Farm Dashboard</h1>
    
    <div class="container">
        <div class="card">
            <h3>‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</h3>
            <div class="value" id="temp">--</div>
            <div class="unit">¬∞C</div>
        </div>
        <div class="card">
            <h3>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</h3>
            <div class="value" id="humi">--</div>
            <div class="unit">%</div>
        </div>
        <div class="card">
            <h3>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡πÉ‡∏ô‡∏î‡∏¥‡∏ô</h3>
            <div class="value" id="soil">--</div>
            <div class="unit">%</div>
        </div>
    </div>

    <div class="status">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="time">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span></div>

    <script>
        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Web App URL ‡∏à‡∏≤‡∏Å Google Apps Script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        const SCRIPT_URL = "https://script.google.com/macros/s/XXXX/exec";

        async function fetchData() {
            try {
                const response = await fetch(SCRIPT_URL + "?action=read");
                const data = await response.json();
                
                document.getElementById('temp').innerText = data.temp;
                document.getElementById('humi').innerText = data.humi;
                document.getElementById('soil').innerText = data.soil;
                document.getElementById('time').innerText = new Date().toLocaleTimeString();
            } catch (error) {
                console.error("Error fetching data:", error);
                document.getElementById('time').innerText = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ";
            }
        }

        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡πÜ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setInterval(fetchData, 5000);
        fetchData(); // ‡∏î‡∏∂‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
    </script>
</body>
</html>
